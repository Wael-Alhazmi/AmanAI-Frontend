<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8" />
    <title>AmanAI โ ุงูููุตุฉ ุงูุฐููุฉ ููุจูุงุบุงุช ูุงูุชุญููู ุงููุฑูุฑู</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <link rel="stylesheet" href="style.css" />

    <!-- Leaflet -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
    <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>

    <!-- Heatmap -->
    <script src="https://unpkg.com/leaflet.heat/dist/leaflet-heat.js"></script>

    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>

<body>

    <!-- ======================= -->
    <!--      ุงูุดุฑูุท ุงูุนููู      -->
    <!-- ======================= -->
    <div class="topbar">
        <div class="topbar-left">
            <div class="system-badge">AmanAI</div>
            <div class="topbar-title">
                <div class="topbar-main">ุงูููุตุฉ ุงูุฐููุฉ ููุจูุงุบุงุช ุงููุฑูุฑูุฉ</div>
                <div class="topbar-sub">ูุธุงู ุญูููู ูุชุญููู ุงูุงุฒุฏุญุงู ูุชูุฑูุฒ ุงูุฏูุฑูุงุช</div>
            </div>
        </div>

        <button id="themeToggle" class="theme-toggle">๐ ุงููุถุน ุงููููู</button>
    </div>

    <!-- ======================= -->
    <!--        ุงูุนููุงู           -->
    <!-- ======================= -->
    <header class="simple-header">
        <h1>ููุตุฉ AmanAI</h1>
        <p>ุชุญููู ุงูุจูุงุบุงุช โ ุงูุชูุจุค ุจูุณุชูู ุงูุฎุทูุฑุฉ โ ุฏุนู ุงุชุฎุงุฐ ุงููุฑุงุฑ ุงูููุฏุงูู</p>
    </header>

    <main class="main">

        <!-- ======================= -->
        <!--        ุงูุฅุญุตุงุฆูุงุช       -->
        <!-- ======================= -->
        <section class="panel">
            <div class="panel-header">ุฅุญุตุงุฆูุงุช ุณุฑูุนุฉ</div>

            <div class="kpi-section">
                <div class="kpi-item">
                    ุฅุฌูุงูู ุงูุจูุงุบุงุช
                    <span id="stat_total">0</span>
                </div>
                <div class="kpi-item">
                    ุจูุงุบุงุช ุฎุทูุฑุฉ ุนุงููุฉ
                    <span id="stat_high">0</span>
                </div>
                <div class="kpi-item">
                    ุจูุงุบุงุช ุขุฎุฑ ุณุงุนุฉ
                    <span id="stat_last_hour">0</span>
                </div>
                <div class="kpi-item">
                    ูุณุจุฉ ุงูุฎุทูุฑุฉ ุงูุนุงููุฉ
                    <span id="stat_high_pct">0%</span>
                </div>
            </div>
        </section>

        <!-- ======================= -->
        <!--         ุงูุฎุฑูุทุฉ         -->
        <!-- ======================= -->
        <section class="panel map-wrapper margin-top">
            <div class="panel-header">ุงูุฎุฑูุทุฉ ุงูุฐููุฉ</div>
            <p class="map-subtitle">ุฅุฏุงุฑุฉ ุทุจูุงุช ุงููุฑูุฑ ูุงูุญูุงุฏุซ ูุงูุชุญููู ุงูุชูุจุคู ูุชูุฑูุฒ ุงูุฏูุฑูุงุช</p>

            <div class="traffic-controls">
                <button onclick="toggleTrafficLayer()">๐ฆ ุทุจูุฉ ุงููุฑูุฑ</button>
                <button onclick="toggleIncidentsLayer()">๐ด ุทุจูุฉ ุงูุญูุงุฏุซ</button>
                <button onclick="detectTrafficAutomatically()">๐ฅ ุชุญููู ุงูุงุฒุฏุญุงู</button>
                <button onclick="forecastPatrolZones()">๐ ุชูุฑูุฒ ุงูุฏูุฑูุงุช (24 ุณุงุนุฉ)</button>
            </div>

            <div id="map-notify" class="map-notification"></div>
            <div id="map"></div>
        </section>

        <!-- ======================= -->
        <!--       ุงููุฎุทุทุงุช          -->
        <!-- ======================= -->
        <section class="grid-two margin-top">
            <div class="chart-box">
                <h3>๐ ุชูุฒูุน ุงูุจูุงุบุงุช ุญุณุจ ูุณุชูู ุงูุฎุทูุฑุฉ</h3>
                <canvas id="riskChart"></canvas>
            </div>

            <div class="chart-box">
                <h3>๐ ุฅุญุตุงุฆูุฉ ูุณุชููุงุช ุงูุฎุทูุฑุฉ</h3>
                <canvas id="riskBarChart"></canvas>
            </div>
        </section>

        <!-- ======================= -->
        <!--      ุชุณุฌูู ุจูุงุบ         -->
        <!-- ======================= -->
        <section class="panel margin-top">
            <div class="panel-header">๐ ุชุณุฌูู ุจูุงุบ ูุฏูู</div>

            <div class="form-grid">
                <label>ููุน ุงูุจูุงุบ:
                    <select id="incident_type">
                        <option>ุงุฒุฏุญุงู</option>
                        <option>ุญุงุฏุซ</option>
                        <option>ุทุฑูู ูุบูู</option>
                        <option>ุฃุนูุงู ุตูุงูุฉ</option>
                    </select>
                </label>

                <label>ุงูุฎุทูุฑุฉ ุงููุฑุตูุฏุฉ:
                    <select id="observed_risk">
                        <option>ููุฎูุถ</option>
                        <option>ูุชูุณุท</option>
                        <option>ูุฑุชูุน</option>
                    </select>
                </label>

                <label>ุงูุชูุตูุฉ:
                    <input id="manual_recommendation" type="text" placeholder="ูุซุงู: ุฅุฑุณุงู ุฏูุฑูุงุช ุฅุถุงููุฉุ ุชุญููู ูุณุงุฑ..." />
                </label>

                <label>ุฅุญุฏุงุซูุงุช LAT:
                    <input id="manual_lat" type="number" step="0.0001" placeholder="24.4700" />
                </label>

                <label>ุฅุญุฏุงุซูุงุช LNG:
                    <input id="manual_lng" type="number" step="0.0001" placeholder="39.6100" />
                </label>
            </div>

            <button class="action-btn" onclick="logIncident()">๐พ ุญูุธ ุงูุจูุงุบ</button>

            <div class="log-box" id="log_output"></div>
        </section>

        <!-- ======================= -->
        <!--    ุฌุฏูู ุงูุจูุงุบุงุช        -->
        <!-- ======================= -->
        <section class="panel margin-top table-section">
            <div class="panel-header">๐ ุขุฎุฑ ุงูุจูุงุบุงุช ุงููุณุฌูุฉ</div>

            <table>
                <thead>
                    <tr>
                        <th>ููุน ุงูุจูุงุบ</th>
                        <th>ุงูุฎุทูุฑุฉ ุงููุชููุนุฉ</th>
                        <th>ุงูุฎุทูุฑุฉ ุงููุฑุตูุฏุฉ</th>
                        <th>ุงูุชูุตูุฉ</th>
                        <th>ุงูุฅุญุฏุงุซูุงุช</th>
                        <th>ุงูููุช</th>
                        <th>ุฅุฌุฑุงุก</th>
                    </tr>
                </thead>

                <tbody id="incident_table"></tbody>
            </table>

            <div class="table-actions">
                <button class="delete-btn" onclick="clearIncidents()">๐ ูุณุญ ุฌููุน ุงูุจูุงุบุงุช</button>
                <button class="action-btn" onclick="exportPDF()">๐ฅ ุชุตุฏูุฑ ุชูุฑูุฑ PDF</button>
            </div>
        </section>

    </main>

    <script src="script.js"></script>

</body>
</html>
